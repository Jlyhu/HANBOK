<!DOCTYPE html>
<html>
<head>
    <title>Tigre Pesquero</title>
    <style>
        body {
            overflow: hidden;
            margin: 0;
            background: white; /* Fondo blanco */
        }
        
        .character {
            width: 150px;
            height: 150px;
            position: absolute;
            bottom: 50px;
            left: 50%;
            background-image: url('tigre.png');
            background-size: contain;
            background-repeat: no-repeat;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }
        
        .fishing-rod {
            position: absolute;
            width: 5px;
            height: 0;
            background: #654321;
            transform-origin: top;
        }
        
        .lure {
            width: 15px;
            height: 15px;
            background: gold;
            position: absolute;
            border-radius: 50%;
            animation: blink 1s infinite;
            box-shadow: 0 0 8px orange;
        }
        
        .fish {
            width: 80px;
            height: 40px;
            position: absolute;
            bottom: 20px;
            background-image: url('pez.png');
            background-size: contain;
            background-repeat: no-repeat;
            filter: brightness(1.2);
        }
        
        #score {
            position: fixed;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: #2c3e50; /* Color oscuro para mejor contraste */
            font-weight: bold;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.3; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="score">Puntos: 0</div>
    <div class="character"></div>
    <div class="fish"></div>

    <script>
        let characterX = 400;
        let score = 0;
        let isFishing = false;
        let lureElement = null;
        let fishingRodElement = null;
        let fishX = 0;
        let fishDirection = 1;

        const fish = document.querySelector('.fish');
        
        function moveFish() {
            fishX += 2 * fishDirection;
            if(fishX > window.innerWidth - 80 || fishX < 0) {
                fishDirection *= -1;
                fish.style.transform = fishDirection === 1 ? 'scaleX(1)' : 'scaleX(-1)';
            }
            fish.style.left = fishX + 'px';
            requestAnimationFrame(moveFish);
        }

        document.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowLeft' && characterX > 0) {
                characterX -= 20;
            } else if(e.key === 'ArrowRight' && characterX < window.innerWidth - 150) {
                characterX += 20;
            } else if(e.key === ' ' && !isFishing) {
                castFishingRod();
            }
            
            document.querySelector('.character').style.left = characterX + 'px';
        });

        function castFishingRod() {
            isFishing = true;
            const character = document.querySelector('.character');
            
            fishingRodElement = document.createElement('div');
            fishingRodElement.className = 'fishing-rod';
            lureElement = document.createElement('div');
            lureElement.className = 'lure';
            
            fishingRodElement.style.left = (characterX + 70) + 'px';
            fishingRodElement.style.top = '50px';
            
            document.body.appendChild(fishingRodElement);
            fishingRodElement.appendChild(lureElement);
            
            let height = 0;
            const animate = () => {
                height += 5;
                fishingRodElement.style.height = height + 'px';
                lureElement.style.bottom = -15 + 'px';
                
                if(height < 300) {
                    requestAnimationFrame(animate);
                } else {
                    checkCollision();
                    retractFishingRod();
                }
            }
            
            animate();
        }

        function checkCollision() {
            const lureRect = lureElement.getBoundingClientRect();
            const fishRect = fish.getBoundingClientRect();
            
            if(!(lureRect.right < fishRect.left || 
                 lureRect.left > fishRect.right || 
                 lureRect.bottom < fishRect.top || 
                 lureRect.top > fishRect.bottom)) {
                score++;
                document.getElementById('score').textContent = `Puntos: ${score}`;
            }
        }

        function retractFishingRod() {
            let height = 300;
            const animate = () => {
                height -= 5;
                fishingRodElement.style.height = height + 'px';
                
                if(height > 0) {
                    requestAnimationFrame(animate);
                } else {
                    fishingRodElement.remove();
                    isFishing = false;
                }
            }
            
            animate();
        }

        moveFish();
    </script>
</body>
</html>
